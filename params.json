{"name":"Connection Pool Client","tagline":"Kafka & Hbase & Redis 连接池客户端","body":"Connection Pool Client\r\n==============================\r\n  基于 [Apache Commons Pool ™](http://commons.apache.org/proper/commons-pool/) 框架\r\n\r\n  连接池客户端 ( [Apache Kafka](http://kafka.apache.org/) &amp; [Apache Hbase](http://hbase.apache.org/) &amp; [Redis](http://redis.io/) )\r\n  \r\n  * [Documentation](#documentation)\r\n  * [KafkaConnectionPool](#kafkaconnectionpool)\r\n  * [HbaseConnectionPool](#hbaseconnectionpool)\r\n  * [RedisConnectionPool](#redisconnectionpool)\r\n\r\n\r\n## Documentation\r\n\r\nAPI documentation is available at [this](http://htmlpreview.github.io/?https://raw.githubusercontent.com/darkphoenixs/connection-pool-client/v1.0/doc/index.html)\r\n\r\n## KafkaConnectionPool\r\n\r\nUse the [KafkaConnectionPool](https://github.com/darkphoenixs/connection-pool-client/blob/master/src/main/java/org/darkphoenixs/pool/kafka/KafkaConnectionPool.java) need instantiate `PoolConfig` and `Properties`\r\n\r\nFor example, the following \r\n```java\r\n\t\t/* poolConfig */\r\n\t\tPoolConfig config = new PoolConfig();\r\n\t\tconfig.setMaxTotal(20);\r\n\t\tconfig.setMaxIdle(5);\r\n\t\tconfig.setMaxWaitMillis(1000);\r\n\t\tconfig.setTestOnBorrow(true);\r\n\r\n\t\t/* properties */\r\n\t\tProperties props = new Properties();\r\n\t\tprops.setProperty(\"metadata.broker.list\", \"localhost:9092\");\r\n\t\tprops.setProperty(\"producer.type\", \"async\");\r\n\t\tprops.setProperty(\"request.required.acks\", \"0\");\r\n\t\tprops.setProperty(\"compression.codec\", \"snappy\");\r\n\t\tprops.setProperty(\"batch.num.messages\", \"200\");\r\n\r\n\t\t/* connection pool */\r\n\t\tKafkaConnectionPool pool = new KafkaConnectionPool(config, props);\r\n\r\n\t\t/* pool getConnection */\r\n\t\tProducer<byte[], byte[]> producer = pool.getConnection();\r\n\r\n\t\t...\r\n\r\n\t\t/* producer send */\r\n\t\tproducer.send(...);\r\n\r\n\t\t/* pool returnConnection */\r\n\t\tpool.returnConnection(producer);\r\n```\r\n## HbaseConnectionPool\r\nUse the [HbaseConnectionPool](https://github.com/darkphoenixs/connection-pool-client/blob/master/src/main/java/org/darkphoenixs/pool/hbase/HbaseConnectionPool.java) need instantiate `PoolConfig` and `Configuration`\r\n\r\nFor example, the following \r\n```java\r\n\t\t/* poolConfig */\r\n\t\tPoolConfig config = new PoolConfig();\r\n\t\tconfig.setMaxTotal(20);\r\n\t\tconfig.setMaxIdle(5);\r\n\t\tconfig.setMaxWaitMillis(1000);\r\n\t\tconfig.setTestOnBorrow(true);\r\n\t\t\r\n\t\t/* configuration */\r\n\t\tConfiguration hbaseConfig = new Configuration();\r\n\t\thbaseConfig.set(\"hbase.zookeeper.quorum\", \"localhost\");\r\n\t\thbaseConfig.set(\"hbase.zookeeper.property.clientPort\", \"2181\");\r\n\t\thbaseConfig.set(\"hbase.master\", \"localhost:60000\");\r\n\t\thbaseConfig.set(\"hbase.rootdir\", \"hdfs://localhost:9000/hbase\");\r\n\t\t\r\n\t\t/* connection pool */\r\n\t\tHbaseConnectionPool pool = new HbaseConnectionPool(config, hbaseConfig);\r\n\r\n\t\t/* pool getConnection */\r\n\t\tConnection conn = pool.getConnection();\r\n\r\n\t\t/* conn getTable */\r\n\t\tTable table = conn.getTable(TableName.valueOf(\"TableTest\"));\r\n\r\n\t\t...\r\n\r\n\t\t/* table close */\r\n\t\ttable.close();\r\n\t\t\r\n\t\t/* pool returnConnection */\r\n\t\tpool.returnConnection(conn);\r\n```\r\n## RedisConnectionPool\r\nUse the [RedisConnectionPool](https://github.com/darkphoenixs/connection-pool-client/blob/master/src/main/java/org/darkphoenixs/pool/redis/RedisConnectionPool.java) need instantiate `PoolConfig` \r\n\r\nFor example, the following \r\n```java\r\n\t\t/* poolConfig */\r\n\t\tPoolConfig config = new PoolConfig();\r\n\t\tconfig.setMaxTotal(20);\r\n\t\tconfig.setMaxIdle(5);\r\n\t\tconfig.setMaxWaitMillis(1000);\r\n\t\tconfig.setTestOnBorrow(true);\r\n\t\t\r\n\t\t/* connection pool */\r\n\t\tRedisConnectionPool pool = new RedisConnectionPool(config, \"localhost\", 6379);\r\n\t\t\r\n\t\t/* pool getConnection */\r\n\t\tJedis jedis = pool.getConnection();\r\n\t\t\t\r\n\t\t...\r\n\t\t\r\n\t\t/* pool getConnection */\r\n\t\tpool.returnConnection(jedis);\r\n```\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}